<!doctype html><html lang=fr><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Blog qui parle de lecture et de web"><meta name=keywords content="hugo,html,lecture,web,shortcode"><title>Schrek.fr</title>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="My PWA"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js")</script><meta property="og:url" content="https://schrek.fr/posts/2024/3/caja/"><meta property="og:site_name" content="Schrek.fr"><meta property="og:title" content="Gestionnaire de fichier Caja"><meta property="og:description" content="Caja est le gestionnaire de fichiers officiel de l’environnement MATE.
Script Je voulais ajouter des possibilités de click droit via des scripts.
C’est assez simple, il suffit de placer une exécutable dans le dossier ./config/caja/script de votre répertoire /home."><meta property="og:locale" content="fr_fr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-25T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-25T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Caja"><link href=/css/uikit.min.min.74065b0cc0cc771b6d0c8cdd1571f95022330dbe057cfe7f5c22ddf003313c6715e6047ab88bb5766ca27342b6d7b572f78f0fa2110438c5a0edeb269788d553.css rel=stylesheet integrity="sha512-dAZbDMDMdxttDIzdFXH5UCIzDb4FfP5/XCLd8AMxPGcV5gR6uIu1dmyic0K217Vy948PohEEOMWg7esml4jVUw==" crossorigin=anonymous><link href=/css/styles.min.c8d7b0257c6b4bd9eee28e099cdc9010c078e8211022eb81adb460c29fbc903bd3ab8addb1ba62eab594267abaf0898817e99271f31d46b3ddee644238900f32.css rel=stylesheet integrity="sha512-yNewJXxrS9nu4o4JnNyQEMB46CEQIuuBrbRgwp+8kDvTq4rdsbpi6rWUJnq68ImIF+mScfMdRrPd7mRCOJAPMg==" crossorigin=anonymous></head><body><header><div class="uk-container uk-container-xsmall uk-padding-small"><a href=https://schrek.fr/><h1 classe=uk-heading-small>Schrek.fr</h1></a><a href=https://schrek.fr/><h2>Mon super blog :)</h2></a></div><nav class="uk-navbar-container uk-navbar-transparent" uk-navbar><div class=uk-navbar-center><ul class=uk-navbar-nav><li class=uk-active><a href=/><span uk-icon="icon:home; ratio: 2"></span></a></li><li class=uk-active><a href=/pages/apropos/><span uk-icon="icon:info; ratio: 2"></span></a></li><li class=uk-active><a href=/wiki/><span uk-icon="icon:database; ratio: 2"></span></a></li><li class=uk-active><a href=/notes/><span uk-icon="icon:pencil; ratio: 2"></span></a></li><li class=uk-active><a href=/pages/tagscloud/><span uk-icon="icon:hashtag; ratio: 2"></span></a></li><li class=uk-active><a href=/pages/search/><span uk-icon="icon:search; ratio: 2"></span></a></li><li class=uk-active><a href=/index.xml><span uk-icon="icon:rss; ratio: 2"></span></a></li></ul></div></nav><hr class=uk-divider-icon></header><main><div class="uk-container uk-background-muted uk-box-shadow-large uk-padding"><ol class=uk-breadcrumb><li><a href=/>home</a></li><li><a href=https://schrek.fr/posts>posts</a></li><li><a href=https://schrek.fr/posts/2024>2024</a></li><li><a href=https://schrek.fr/posts/2024/3>3</a></li><li><a href=https://schrek.fr/posts/2024/3/caja>caja</a></li></ol><article class=uk-article><h1 class=uk-article-title>Gestionnaire de fichier Caja</h1><p class=uk-article-meta>2024-03-25
<span class="labelcat uk-label"><a href=/categories/linux>Linux</a></span><br><i>Temps de lecture: 1 minutes.</i></p><br><p class=uk-text-lead><div class="uk-section uk-align-right"><div class="uk-card-small uk-card-default uk-card-body" uk-scrollspy="cls: uk-animation-slide-right; repeat: false"><h3 class=uk-card-title>Table des matières</h3><p class="toc uk-text-small"><nav id=TableOfContents><ul><li><a href=#script>Script</a></li><li><a href=#variables>Variables</a></li><li><a href=#exemple-de-script>Exemple de script</a></li><li><a href=#liens>Liens</a></li></ul></nav></p></div></div><p>Caja est le gestionnaire de fichiers officiel de l&rsquo;environnement MATE.</p><h2 id=script>Script</h2><p>Je voulais ajouter des possibilités de click droit via des scripts.</p><p>C’est assez simple, il suffit de placer une exécutable dans le dossier <em>./config/caja/script</em> de votre répertoire <em>/home</em>.</p><h2 id=variables>Variables</h2><p>Quelques variables pour utiliser les scripts.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>*$@* Fichiers sélectionnés 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>*$PWD* Répertoire courant 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>*$CAJA_SCRIPT_SELECTED_FILE_PATHS*  
</span></span><span style=display:flex><span>Chemin des fichiers sélectionnés.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>*$CAJA_SCRIPT_SELECTED_URI* 
</span></span><span style=display:flex><span>URI des fichiers sélectionnés, pour les fichiers distants.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>*$CAJA_SCRIPT_CURRENT_URI*   
</span></span><span style=display:flex><span>URI du dossier depuis lequel le script est lancé.</span></span></code></pre></div><p>Astuce: Dans le cas de multiples sélections, les chemins/URI sont séparés par des retours à la ligne.</p><p>On va tester dans un script en créant un fichier <em>test</em> dans le dossier <em>.config/caja/script</em>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>exec &amp;&gt;&gt; <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>basename <span style=color:#e6db74>&#34;</span>$0<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>.log&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;\$@=</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;\$1=</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;PWD=</span>$PWD<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$CAJA_SCRIPT_SELECTED_FILE_PATHS<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$CAJA_SCRIPT_SELECTED_URI<span style=color:#e6db74>&#34;</span> 
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$CAJA_SCRIPT_CURRENT_URI<span style=color:#e6db74>&#34;</span></span></span></code></pre></div><p>Il faut autoriser l&rsquo;exécution.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ chmod +x test</span></span></code></pre></div><p>Avec caja, on fait un clic droit sur un fichier et on obtient un fichier <em>test.log</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$@<span style=color:#f92672>=</span>checksum
</span></span><span style=display:flex><span>$1<span style=color:#f92672>=</span>checksum
</span></span><span style=display:flex><span>PWD<span style=color:#f92672>=</span>/home/tuxien/.config/caja/scripts
</span></span><span style=display:flex><span>/home/tuxien/.config/caja/scripts/checksum
</span></span><span style=display:flex><span>file:///home/tuxien/.config/caja/scripts</span></span></code></pre></div><h2 id=exemple-de-script>Exemple de script</h2><p>On va convertir des images au format <a href=https://fr.wikipedia.org/wiki/WebP>Webp</a> (j&rsquo;utilise ce format pour mes articles dans Hugo) en utilisant le langage Python.</p><p>Toujours dans le dossier de travail <em>.config/caja/script/</em>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/python3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>new_name</span>(file):
</span></span><span style=display:flex><span>    os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>splitext(file)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;.&#39;</span><span style=color:#f92672>.</span>join([os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>splitext(file)[<span style=color:#ae81ff>0</span>],<span style=color:#e6db74>&#39;webp&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>files <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>:]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> file <span style=color:#f92672>in</span> files:
</span></span><span style=display:flex><span>    os<span style=color:#f92672>.</span>system(<span style=color:#e6db74>&#39;cwebp -q 90 </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> -o </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> (file, new_name(file)))</span></span></code></pre></div><p>Quelques scripts en PJ, bien regarder les dépendances comme <em>zenity</em> pour afficher des infos.</p><div class="attachments-files uk-card uk-card-small uk-width-1-3@m uk-padding"><h3 class=attachments-files-titre>Téléchargement <span uk-icon="icon: cloud-download;ratio:2"></span></h3><div class=attachments-files><li><a href=/posts/2024/3/caja/files/caja_script.zip>caja_script.zip</a></li></div></div><h2 id=liens>Liens</h2><p><a href=https://doc.ubuntu-fr.org/caja>https://doc.ubuntu-fr.org/caja</a></p><p><a href=https://gist.github.com/bitsgalore/fc69e55c67830413f97c>https://gist.github.com/bitsgalore/fc69e55c67830413f97c</a></p><p><a href=https://www.pragmageek.fr/2022/01/la-bonne-maniere-de-faire-un-script-nautilus-en-bash/>https://www.pragmageek.fr/2022/01/la-bonne-maniere-de-faire-un-script-nautilus-en-bash/</a></p><p><a href=https://community.linuxmint.com/software/view/caja>https://community.linuxmint.com/software/view/caja</a></p></p></article><ul class=uk-pagination><li><a class=uk-link-heading href=https://schrek.fr/posts/2024/4/outresable/><span class=uk-margin-small-right uk-pagination-previous></span> Outresable - Hugh Howey</a></li><li class=uk-margin-auto-left><a class=uk-link-heading href=https://schrek.fr/posts/2024/3/outsphere/>Outsphere - Guy-Roger Duvert<span class=uk-margin-small-left uk-pagination-next></span></a></li></ul><hr class=uk-divider-icon><div class="uk-grid-small uk-child-width-auto" uk-grid><div><p class=uk-text-light><span uk-icon=icon:hashtag></span>TAGS</p><ul class="uk-list uk-display-inline-block"><li><a class="uk-button uk-button-default" href=https://schrek.fr/tags/linux/>Linux</a></li><li><a class="uk-button uk-button-default" href=https://schrek.fr/tags/caja/>Caja</a></li></ul><br><a href=https://ko-fi.com/Q5Q7LH0AN target=_blank><img height=36 style=border:0;height:36px src='https://storage.ko-fi.com/cdn/kofi2.png?v=3' border=0 alt='Buy Me a Beer at ko-fi.com'></a></div></div></div></main><footer><div class="uk-container uk-container-small uk-background-muted uk-margin-small-top uk-padding-small">2024 - Construit avec <a class=uk-link-muted href=https://gohugo.io/>Hugo</a> et de <a class=uk-link-muted href=https://getuikit.com/>UiKit</a></div></footer><script src=/js/uikit.min.min.b795e52a95a6766546e08686e5d002243ef20e0fb3c22c860b7bd2adb02129b7.js integrity="sha256-t5XlKpWmdmVG4IaG5dACJD7yDg+zwiyGC3vSrbAhKbc=" crossorigin=anonymous></script><script defer src=/js/uikit-icons.min.min.992015e15d0a403b809bb04d0599e2873818150584953ed5864664037c6b4333.js integrity="sha256-mSAV4V0KQDuAm7BNBZnihzgYFQWElT7VhkZkA3xrQzM=" crossorigin=anonymous></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"]]}}</script></body></html>