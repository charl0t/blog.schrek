<!doctype html><html lang=fr><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Blog qui parle de lecture et de web"><meta name=keywords content="hugo,html,lecture,web,shortcode"><title>Schrek.fr</title>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="My PWA"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js")</script><meta property="og:url" content="https://schrek.fr/posts/2024/12/hugo-recherche/"><meta property="og:site_name" content="Schrek.fr"><meta property="og:title" content="Hugo et les recherches"><meta property="og:description" content="Pour faciliter les recherches sur mon site, j’ai ajouté Pagefind
Pagefind est un outil de recherche rapide et efficace conçu pour les sites web statiques. Contrairement aux solutions classiques qui nécessitent un serveur ou une base de données, Pagefind indexe les contenus directement lors de la compilation du site et permet une recherche instantanée via JavaScript, sans dépendance serveur."><meta property="og:locale" content="fr_fr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-19T00:00:00+00:00"><meta property="article:modified_time" content="2024-12-19T00:00:00+00:00"><meta property="article:tag" content="Markdown"><meta property="article:tag" content="Html"><meta property="article:tag" content="Hugo"><meta property="article:tag" content="Pagefind"><meta property="og:see_also" content="https://schrek.fr/posts/2024/3/commentaires/"><meta property="og:see_also" content="https://schrek.fr/posts/2024/2/katex/"><meta property="og:see_also" content="https://schrek.fr/posts/2023/09/hugo-pwa/"><meta property="og:see_also" content="https://schrek.fr/posts/2023/08/hugo-shortcode-bouton/"><meta property="og:see_also" content="https://schrek.fr/posts/2023/08/hugo-et-nuages-de-tags/"><meta property="og:see_also" content="https://schrek.fr/posts/2023/08/hugo-et-les-liens/"><link href=/css/uikit.min.min.74065b0cc0cc771b6d0c8cdd1571f95022330dbe057cfe7f5c22ddf003313c6715e6047ab88bb5766ca27342b6d7b572f78f0fa2110438c5a0edeb269788d553.css rel=stylesheet integrity="sha512-dAZbDMDMdxttDIzdFXH5UCIzDb4FfP5/XCLd8AMxPGcV5gR6uIu1dmyic0K217Vy948PohEEOMWg7esml4jVUw==" crossorigin=anonymous><link href=/css/styles.min.afcd884f8dd136efa1b96e7cda014003cf94c49f183f0ef14bd022c6177e966c32c7161005a9388651cb103eec51f4106a0aa012b8812a467a1429f3d13cddd1.css rel=stylesheet integrity="sha512-r82IT43RNu+huW582gFAA8+UxJ8YPw7xS9Aixhd+lmwyxxYQBak4hlHLED7sUfQQagqgEriBKkZ6FCnz0Tzd0Q==" crossorigin=anonymous></head><body><header><nav class="uk-navbar-container uk-navbar-transparent" uk-navbar><div class=uk-navbar-center><a class="uk-navbar-item uk-logo" href=https://schrek.fr/><h1 classe=uk-heading-small>Schrek.fr</h1></a><ul class=uk-navbar-nav><li><a href=/><span uk-icon="icon:home; ratio: 2"></span></a><div class=uk-navbar-subtitle>Home</div></li><li><a href=/pages/apropos/><span uk-icon="icon:info; ratio: 2"></span></a><div class=uk-navbar-subtitle>A Propos</div></li><li><a href=/wiki/><span uk-icon="icon:database; ratio: 2"></span></a><div class=uk-navbar-subtitle>Wiki</div></li><li><a href=/notes/><span uk-icon="icon:pencil; ratio: 2"></span></a><div class=uk-navbar-subtitle>Notes</div></li><li><a href=/pages/tagscloud/><span uk-icon="icon:hashtag; ratio: 2"></span></a><div class=uk-navbar-subtitle>Tags</div></li><li><a href=/pages/search/><span uk-icon="icon:search; ratio: 2"></span></a><div class=uk-navbar-subtitle>Recherche</div></li><li><a href=/index.xml><span uk-icon="icon:rss; ratio: 2"></span></a><div class=uk-navbar-subtitle>RSS</div></li></ul></div></nav><hr class=uk-divider-icon></header><main><div class="uk-container uk-background-muted uk-box-shadow-large uk-padding"><ol class=uk-breadcrumb><li><a href=/>home</a></li><li><a href=https://schrek.fr/posts>posts</a></li><li><a href=https://schrek.fr/posts/2024>2024</a></li><li><a href=https://schrek.fr/posts/2024/12>12</a></li><li><a href=https://schrek.fr/posts/2024/12/hugo-recherche>hugo-recherche</a></li></ol><article class=uk-article><h1 class=uk-article-title>Hugo et les recherches</h1><p class=uk-article-meta>2024-12-19
<span class="labelcat uk-label"><a href=/categories/web>Web</a></span><br><i>Temps de lecture: 2 minutes.</i></p><p>Cet article fait partie de la série: <a href=https://schrek.fr//series/hugo>Hugo</a></p><br><p class=uk-text-lead><div class="uk-section uk-align-right"><div class="uk-card-small uk-card-default uk-card-body" uk-scrollspy="cls: uk-animation-slide-right; repeat: false"><h3 class=uk-card-title>Table des matières</h3><p class="toc uk-text-small"><nav id=TableOfContents><ul><li><a href=#caractéristiques-principales>Caractéristiques principales</a></li><li><a href=#installation>Installation</a></li><li><a href=#indexation>Indexation</a></li><li><a href=#page-recherche>Page Recherche</a></li><li><a href=#liens>Liens</a></li></ul></nav></p></div></div><p>Pour faciliter les recherches sur mon site, j&rsquo;ai ajouté <a href=https://pagefind.app/>Pagefind</a></p><p>Pagefind est un outil de recherche rapide et efficace conçu pour les sites web statiques. Contrairement aux solutions classiques qui nécessitent un serveur ou une base de données, Pagefind indexe les contenus directement lors de la compilation du site et permet une recherche instantanée via JavaScript, sans dépendance serveur.</p><p>.</p><h2 id=caractéristiques-principales>Caractéristiques principales</h2><ul><li>Léger et rapide : Le fichier d’index est compressé et ne charge que les parties nécessaires, garantissant des performances élevées même sur des sites volumineux.</li><li>Facilité d’intégration : Compatible avec de nombreux générateurs de sites statiques comme Hugo ou Jekyll. Il suffit d’ajouter l’outil lors du processus de build.</li><li>Multilingue : Supporte plusieurs langues, rendant les recherches précises même dans des contextes linguistiques variés.</li><li>Accessibilité : Les résultats sont rendus en HTML, assurant une compatibilité avec les lecteurs d’écran et autres outils d&rsquo;accessibilité.</li></ul><h2 id=installation>Installation</h2><p>L&rsquo;installation est bien documentée sur le site de Pagefind</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ python3 -m pip install <span style=color:#e6db74>&#39;pagefind[extended]&#39;</span></span></span></code></pre></div><h2 id=indexation>Indexation</h2><p>On va demander a Pagefind d&rsquo;indexer notre dossier public (celui que hugo fabrique).
Il faut se placer dans le dossier de notre site Hugo.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ python3 -m pagefind --site <span style=color:#e6db74>&#34;public&#34;</span>
</span></span><span style=display:flex><span>Running Pagefind v1.2.0 <span style=color:#f92672>(</span>Extended<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Running from: <span style=color:#e6db74>&#34;/home/tuxien/projet/blog.schrek&#34;</span>
</span></span><span style=display:flex><span>Source:       <span style=color:#e6db74>&#34;public&#34;</span>
</span></span><span style=display:flex><span>Output:       <span style=color:#e6db74>&#34;public/pagefind&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Walking source directory<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Found <span style=color:#ae81ff>491</span> files matching **/*.<span style=color:#f92672>{</span>html<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Parsing files<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Did not find a data-pagefind-body element on the site.
</span></span><span style=display:flex><span>↳ Indexing all &lt;body&gt; elements on the site.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Reading languages<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Discovered <span style=color:#ae81ff>2</span> languages: unknown, fr
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> page found without an html lang attribute. 
</span></span><span style=display:flex><span>Merging these pages with the fr language, as that is the main language on this site. 
</span></span><span style=display:flex><span>Run Pagefind with --verbose <span style=color:#66d9ef>for</span> more information.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Building search indexes<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Total: 
</span></span><span style=display:flex><span>  Indexed <span style=color:#ae81ff>1</span> language
</span></span><span style=display:flex><span>  Indexed <span style=color:#ae81ff>490</span> pages
</span></span><span style=display:flex><span>  Indexed <span style=color:#ae81ff>7607</span> words
</span></span><span style=display:flex><span>  Indexed <span style=color:#ae81ff>0</span> filters
</span></span><span style=display:flex><span>  Indexed <span style=color:#ae81ff>0</span> sorts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Finished in 2.373 seconds</span></span></code></pre></div><p>Le script Pagefind va indexer notre site et créer un dossier <strong>pagefind</strong>, qui va nous servir pour la recherche.</p><h2 id=page-recherche>Page Recherche</h2><p>Pour mon site, j&rsquo;ai décidé de faire une page dédiée a la recherche.</p><p><a href=https://schrek.fr/pages/search/>https://schrek.fr/pages/search/</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Recherche&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>date</span>: <span style=color:#e6db74>2023-04-07T14:38:35</span><span style=color:#ae81ff>+02</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span><span style=color:#f92672>layout</span>: <span style=color:#ae81ff>search</span>
</span></span><span style=display:flex><span><span style=color:#f92672>toc</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!--Recherche--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;script src=&#34;/pagefind/pagefind-ui.js&#34; type=&#34;text/javascript&#34;&gt;&lt;/script&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;script&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>window.addEventListener(&#39;DOMContentLoaded&#39;, (event) =&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>new PagefindUI({</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>baseUrl</span>: <span style=color:#e6db74>&#34;/&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>// search element id</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>element</span>: <span style=color:#e6db74>&#34;#search&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>// do not show images</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>showImages</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>// I want to use my own CSS</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>resetStyles</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>// do not show subresults of the same page</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>showSubResults</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>excerptLength</span>: <span style=color:#ae81ff>15</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }<span style=color:#ae81ff>);</span>
</span></span><span style=display:flex><span>  }<span style=color:#ae81ff>);</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/script&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;div class=&#34;uk-container-large&#34;&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#ae81ff>&lt;div id=&#34;search&#34; &lt;/div&gt; </span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/div&gt;</span>
</span></span><span style=display:flex><span>   </span></span></code></pre></div><h2 id=liens>Liens</h2><p><a href=https://pagefind.app/>https://pagefind.app/</a></p><p><a href=https://gohugo.io/tools/search/>https://gohugo.io/tools/search/</a></p></p></article><ul class=uk-pagination><li class=uk-margin-auto-left><a class=uk-link-heading href=https://schrek.fr/posts/2024/12/constantinople/>Constantinople 1453<span class=uk-margin-small-left uk-pagination-next></span></a></li></ul><hr class=uk-divider-icon><div class="uk-grid-small uk-child-width-auto" uk-grid><div><p class=uk-text-light><span uk-icon=icon:hashtag></span>TAGS</p><ul class="uk-list uk-display-inline-block"><li><a class="uk-button uk-button-default" href=https://schrek.fr/tags/markdown/>Markdown</a></li><li><a class="uk-button uk-button-default" href=https://schrek.fr/tags/html/>Html</a></li><li><a class="uk-button uk-button-default" href=https://schrek.fr/tags/hugo/>Hugo</a></li><li><a class="uk-button uk-button-default" href=https://schrek.fr/tags/pagefind/>Pagefind</a></li></ul><br><a href=https://ko-fi.com/Q5Q7LH0AN target=_blank><img height=36 style=border:0;height:36px src='https://storage.ko-fi.com/cdn/kofi2.png?v=3' border=0 alt='Buy Me a Beer at ko-fi.com'></a></div></div></div></main><footer><div class="uk-container uk-container-small uk-background-muted uk-margin-small-top uk-padding-small">2024 - Construit avec <a class=uk-link-muted href=https://gohugo.io/>Hugo</a> et de <a class=uk-link-muted href=https://getuikit.com/>UiKit</a></div></footer><script src=/js/uikit.min.min.b795e52a95a6766546e08686e5d002243ef20e0fb3c22c860b7bd2adb02129b7.js integrity="sha256-t5XlKpWmdmVG4IaG5dACJD7yDg+zwiyGC3vSrbAhKbc=" crossorigin=anonymous></script><script defer src=/js/uikit-icons.min.min.992015e15d0a403b809bb04d0599e2873818150584953ed5864664037c6b4333.js integrity="sha256-mSAV4V0KQDuAm7BNBZnihzgYFQWElT7VhkZkA3xrQzM=" crossorigin=anonymous></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"]]}}</script></body></html>